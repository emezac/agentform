<div class="space-y-4">
  <% if config['single_field'] == true %>
    <!-- Single field address input -->
    <div class="space-y-2">
      <%= form.text_area "answer[value]", 
                         placeholder: config['placeholder'] || "Enter your full address...",
                         rows: 3,
                         required: question.required?,
                         class: "block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",
                         data: { 
                           "question-response-target": "answerInput",
                           "action": "input->question-response#validateInput"
                         } %>
      
      <% if config['help_text'] %>
        <p class="text-xs text-gray-500"><%= config['help_text'] %></p>
      <% end %>
    </div>
  <% else %>
    <!-- Multi-field address input -->
    <div class="space-y-3">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Street Address</label>
        <%= form.text_field "answer[street]", 
                           placeholder: "123 Main Street",
                           required: question.required?,
                           class: "block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",
                           data: { 
                             "question-response-target": "addressField",
                             "action": "input->question-response#validateInput"
                           } %>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">City</label>
          <%= form.text_field "answer[city]", 
                             placeholder: "City",
                             required: question.required?,
                             class: "block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",
                             data: { 
                               "question-response-target": "addressField",
                               "action": "input->question-response#validateInput"
                             } %>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">State/Province</label>
          <%= form.text_field "answer[state]", 
                             placeholder: "State",
                             required: question.required?,
                             class: "block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",
                             data: { 
                               "question-response-target": "addressField",
                               "action": "input->question-response#validateInput"
                             } %>
        </div>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">ZIP/Postal Code</label>
          <%= form.text_field "answer[zip]", 
                             placeholder: "12345",
                             required: question.required?,
                             class: "block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",
                             data: { 
                               "question-response-target": "addressField",
                               "action": "input->question-response#validateInput"
                             } %>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Country</label>
          <% if config['countries']&.any? %>
            <%= form.select "answer[country]", 
                           options_for_select(config['countries'].map { |c| [c['name'], c['code']] }),
                           { prompt: "Select Country" },
                           { 
                             required: question.required?,
                             class: "block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",
                             data: { 
                               "question-response-target": "addressField",
                               "action": "change->question-response#validateInput"
                             }
                           } %>
          <% else %>
            <%= form.text_field "answer[country]", 
                               placeholder: "Country",
                               required: question.required?,
                               class: "block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",
                               data: { 
                                 "question-response-target": "addressField",
                                 "action": "input->question-response#validateInput"
                               } %>
          <% end %>
        </div>
      </div>
      
      <% if config['help_text'] %>
        <p class="text-xs text-gray-500"><%= config['help_text'] %></p>
      <% end %>
    </div>
  <% end %>
</div>