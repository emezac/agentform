<div id="notification_<%= notification.id %>" class="px-6 py-4 hover:bg-gray-50 transition-colors duration-150 <%= 'bg-blue-50' if notification.unread? %>">
  <div class="flex items-start space-x-4">
    <!-- Event Icon -->
    <div class="flex-shrink-0">
      <div class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-lg">
        <%= notification.event_icon %>
      </div>
    </div>

    <!-- Notification Content -->
    <div class="flex-1 min-w-0">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-2">
          <h4 class="text-sm font-medium text-gray-900 <%= 'font-semibold' if notification.unread? %>">
            <%= notification.title %>
          </h4>
          
          <!-- Priority Badge -->
          <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium <%= notification.priority_color %>">
            <%= notification.priority_icon %> <%= notification.priority.humanize %>
          </span>
          
          <!-- Unread Indicator -->
          <% if notification.unread? %>
            <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
              New
            </span>
          <% end %>
        </div>

        <!-- Actions -->
        <div class="flex items-center space-x-2">
          <% if notification.unread? %>
            <%= button_to mark_as_read_admin_notification_path(notification), 
                method: :patch,
                class: "text-sm text-indigo-600 hover:text-indigo-900",
                data: { turbo_method: :patch } do %>
              Mark Read
            <% end %>
          <% end %>
          
          <%= button_to admin_notification_path(notification), 
              method: :delete,
              class: "text-sm text-red-600 hover:text-red-900",
              data: { 
                turbo_method: :delete,
                confirm: "Are you sure you want to delete this notification?"
              } do %>
            Delete
          <% end %>
        </div>
      </div>

      <!-- Message -->
      <p class="mt-1 text-sm text-gray-600">
        <%= notification.message %>
      </p>

      <!-- Metadata -->
      <div class="mt-2 flex items-center justify-between">
        <div class="flex items-center space-x-4 text-xs text-gray-500">
          <span>
            <svg class="inline w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <%= time_ago_in_words(notification.created_at) %> ago
          </span>
          
          <% if notification.user %>
            <span>
              <svg class="inline w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
              </svg>
              <%= notification.user.email %>
            </span>
          <% end %>
          
          <span>
            <svg class="inline w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
            </svg>
            <%= notification.event_type.humanize %>
          </span>
        </div>

        <!-- Read Status -->
        <% if notification.read? %>
          <span class="text-xs text-gray-400">
            Read <%= time_ago_in_words(notification.read_at) %> ago
          </span>
        <% end %>
      </div>

      <!-- Additional Metadata -->
      <% if notification.metadata.present? && notification.metadata.any? %>
        <div class="mt-3 p-3 bg-gray-50 rounded-md">
          <details class="text-xs">
            <summary class="cursor-pointer text-gray-600 hover:text-gray-800">
              View Details
            </summary>
            <div class="mt-2 space-y-1">
              <% notification.metadata.each do |key, value| %>
                <div class="flex justify-between">
                  <span class="font-medium text-gray-700"><%= key.humanize %>:</span>
                  <span class="text-gray-600"><%= value %></span>
                </div>
              <% end %>
            </div>
          </details>
        </div>
      <% end %>
    </div>
  </div>
</div>