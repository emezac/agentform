<!DOCTYPE html>
<html lang="es" class="h-full">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AgentForm - Analytics Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
    body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
    .animate-slide-in-up { animation: slideInUp 0.6s ease-out forwards; }
    .metric-card { border-left-width: 4px; }
    .ai-insight-card { background: linear-gradient(135deg, #f5f3ff 0%, #eff6ff 100%); border: 1px solid #e0e7ff; }
</style>
</head>
<body class="h-full">
<div class="h-screen flex flex-col">
    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-md border-b border-gray-200 px-6 py-3 shrink-0 z-10">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                 <div class="w-9 h-9 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center shadow-lg">
                    <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-gray-900">An√°lisis: Formulario de Calificaci√≥n de Leads</h1>
                    <p class="text-sm text-gray-500">Rendimiento e insights generados por IA</p>
                </div>
            </div>
            <div class="flex items-center space-x-3">
                <select class="bg-white border border-gray-300 text-gray-700 rounded-md text-sm px-3 py-1.5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                    <option>√öltimos 30 d√≠as</option>
                    <option>√öltimos 7 d√≠as</option>
                    <option>Este mes</option>
                    <option>Mes pasado</option>
                </select>
                <button class="px-3 py-1.5 border border-gray-300 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-50">Exportar PDF</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto p-6 lg:p-8">
        <div class="max-w-7xl mx-auto space-y-8">
            <!-- Key Metrics -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="metric-card bg-white p-5 rounded-lg shadow-sm border-indigo-500 animate-slide-in-up" style="animation-delay: 100ms;">
                    <h3 class="text-sm font-medium text-gray-500">Tasa de Finalizaci√≥n</h3>
                    <p class="mt-2 text-3xl font-bold text-gray-900">87.2%</p>
                    <p class="mt-1 text-xs text-green-600">+5.2% vs. periodo anterior</p>
                </div>
                <div class="metric-card bg-white p-5 rounded-lg shadow-sm border-purple-500 animate-slide-in-up" style="animation-delay: 200ms;">
                    <h3 class="text-sm font-medium text-gray-500">Tiempo Promedio</h3>
                    <p class="mt-2 text-3xl font-bold text-gray-900">1m 45s</p>
                    <p class="mt-1 text-xs text-green-600">-12s m√°s r√°pido</p>
                </div>
                <div class="metric-card bg-white p-5 rounded-lg shadow-sm border-sky-500 animate-slide-in-up" style="animation-delay: 300ms;">
                    <h3 class="text-sm font-medium text-gray-500">Respuestas Totales</h3>
                    <p class="mt-2 text-3xl font-bold text-gray-900">1,247</p>
                    <p class="mt-1 text-xs text-gray-500">En los √∫ltimos 30 d√≠as</p>
                </div>
                 <div class="metric-card bg-white p-5 rounded-lg shadow-sm border-emerald-500 animate-slide-in-up" style="animation-delay: 400ms;">
                    <h3 class="text-sm font-medium text-gray-500">Puntuaci√≥n de Calidad (IA)</h3>
                    <p class="mt-2 text-3xl font-bold text-gray-900">9.2/10</p>
                    <p class="mt-1 text-xs text-gray-500">Calidad de datos alta</p>
                </div>
            </div>

            <!-- Charts -->
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
                <div class="lg:col-span-3 bg-white p-6 rounded-lg shadow-sm animate-slide-in-up" style="animation-delay: 500ms;">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Tendencia de Respuestas</h3>
                    <canvas id="responseTrendChart"></canvas>
                </div>
                <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-sm animate-slide-in-up" style="animation-delay: 600ms;">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">An√°lisis de Abandono (Drop-off)</h3>
                    <canvas id="dropoffFunnelChart"></canvas>
                </div>
            </div>

            <!-- AI Insights -->
            <div class="ai-insight-card p-6 rounded-lg shadow-sm animate-slide-in-up" style="animation-delay: 700ms;">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                    <svg class="w-6 h-6 mr-3 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>
                    Insights Accionables de IA
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                    <div class="bg-white/60 p-4 rounded-md">
                        <p class="font-medium text-gray-800">‚ö†Ô∏è Punto de Fricci√≥n Principal</p>
                        <p class="mt-2 text-gray-600">El 45% de los usuarios abandonan en la pregunta sobre "presupuesto".</p>
                        <a href="#" class="text-indigo-600 font-semibold mt-2 inline-block">Sugerencia IA: Reformular la pregunta para que sea opcional o proporcionar rangos.</a>
                    </div>
                     <div class="bg-white/60 p-4 rounded-md">
                        <p class="font-medium text-gray-800">üìà Oportunidad de Mejora</p>
                        <p class="mt-2 text-gray-600">Las respuestas desde dispositivos m√≥viles tienen una tasa de finalizaci√≥n un 15% menor.</p>
                         <a href="#" class="text-indigo-600 font-semibold mt-2 inline-block">Sugerencia IA: Simplificar la pregunta 4 para m√≥viles, eliminando el campo de texto largo.</a>
                    </div>
                     <div class="bg-white/60 p-4 rounded-md">
                        <p class="font-medium text-gray-800">‚úÖ Patr√≥n Positivo</p>
                        <p class="mt-2 text-gray-600">Los usuarios referidos desde LinkedIn completan el formulario un 30% m√°s r√°pido.</p>
                         <a href="#" class="text-indigo-600 font-semibold mt-2 inline-block">Sugerencia IA: Aumentar la inversi√≥n en la campa√±a de LinkedIn para maximizar leads de alta calidad.</a>
                    </div>
                </div>
            </div>

            <!-- Detailed Breakdown -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Question Performance -->
                <div class="bg-white p-6 rounded-lg shadow-sm animate-fade-in">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Rendimiento por Pregunta</h3>
                    <div class="space-y-4">
                        <!-- Sample Question 1 -->
                        <div class="text-sm">
                            <div class="flex justify-between items-center">
                                <p class="font-medium text-gray-700">1. ¬øCu√°l es tu nombre completo?</p>
                                <span class="text-xs text-gray-500">98% completado</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-1.5 mt-1"><div class="bg-green-500 h-1.5 rounded-full" style="width: 98%"></div></div>
                        </div>
                        <!-- Sample Question 2 -->
                        <div class="text-sm">
                            <div class="flex justify-between items-center">
                                <p class="font-medium text-gray-700">3. Nombre de tu empresa</p>
                                <span class="text-xs text-gray-500">92% completado</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-1.5 mt-1"><div class="bg-green-500 h-1.5 rounded-full" style="width: 92%"></div></div>
                        </div>
                        <!-- Sample Question 3 - High Dropoff -->
                         <div class="text-sm">
                            <div class="flex justify-between items-center">
                                <p class="font-medium text-red-700">4. ¬øCu√°l es tu presupuesto?</p>
                                <span class="text-xs text-red-500">45% abandono</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-1.5 mt-1"><div class="bg-red-500 h-1.5 rounded-full" style="width: 55%"></div></div>
                        </div>
                    </div>
                </div>
                <!-- Data Sources -->
                <div class="bg-white p-6 rounded-lg shadow-sm animate-fade-in">
                     <h3 class="text-lg font-semibold text-gray-800 mb-4">Fuentes de Datos</h3>
                     <div class="grid grid-cols-2 gap-4">
                         <div>
                            <h4 class="font-medium text-gray-600 text-sm mb-2">Por Dispositivo</h4>
                            <canvas id="deviceChart"></canvas>
                         </div>
                         <div>
                            <h4 class="font-medium text-gray-600 text-sm mb-2">Por Fuente</h4>
                            <canvas id="sourceChart"></canvas>
                         </div>
                     </div>
                </div>
            </div>
        </div>
    </main>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    // Chart.js configurations
    const chartOptions = { plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } };

    // Response Trend Chart
    new Chart(document.getElementById('responseTrendChart'), {
        type: 'line',
        data: {
            labels: Array.from({length: 30}, (_, i) => new Date(Date.now() - (29-i)*864e5).toLocaleDateString('es-ES', {day:'numeric', month:'short'})),
            datasets: [{
                label: 'Respuestas',
                data: [12, 19, 15, 25, 22, 30, 28, 35, 40, 38, 42, 45, 50, 48, 55, 60, 58, 62, 65, 70, 68, 72, 75, 80, 78, 82, 85, 90, 88, 95],
                borderColor: '#6366f1',
                backgroundColor: 'rgba(99, 102, 241, 0.1)',
                fill: true,
                tension: 0.4
            }]
        },
        options: { responsive: true, maintainAspectRatio: false }
    });

    // Drop-off Funnel Chart
    new Chart(document.getElementById('dropoffFunnelChart'), {
        type: 'bar',
        data: {
            labels: ['Vistas', 'Inicios', 'Pregunta 2', 'Pregunta 3', 'Completado'],
            datasets: [{
                label: 'Usuarios',
                data: [2500, 1432, 1350, 743, 652],
                backgroundColor: ['#a5b4fc', '#818cf8', '#6366f1', '#4f46e5', '#312e81'],
            }]
        },
        options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
    });

    // Device Chart
    new Chart(document.getElementById('deviceChart'), {
        type: 'doughnut',
        data: {
            labels: ['Desktop', 'M√≥vil', 'Tablet'],
            datasets: [{ data: [65, 25, 10], backgroundColor: ['#6366f1', '#a5b4fc', '#c7d2fe'] }]
        },
        options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom', labels: { boxWidth: 12 } } } }
    });

    // Source Chart
    new Chart(document.getElementById('sourceChart'), {
        type: 'doughnut',
        data: {
            labels: ['Directo', 'Google', 'LinkedIn', 'Otro'],
            datasets: [{ data: [40, 35, 15, 10], backgroundColor: ['#38bdf8', '#fbbf24', '#34d399', '#f87171'] }]
        },
        options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom', labels: { boxWidth: 12 } } } }
    });
});
</script>
</body>
</html>
